<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Explora una galer√≠a de im√°genes y notas √∫nicas en ExenE, con categor√≠as, b√∫squeda y contenido personalizado.">
    <meta name="keywords" content="galer√≠a, im√°genes, notas, ExenE, arte, personalizaci√≥n">
    <title>Galer√≠a de Im√°genes - ExenE</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="https://files.catbox.moe/kz2lot.png" sizes="64x64">
    <link rel="preload" href="https://files.catbox.moe/kz2lot.png" as="image">
    <link rel="preload" href="https://files.catbox.moe/p6lokn.jpg" as="image">
    <link rel="preload" href="imagenes.json" as="fetch" crossorigin="anonymous">
    <link rel="preload" href="notes.json" as="fetch" crossorigin="anonymous">
    <link rel="preload" href="tags.json" as="fetch" crossorigin="anonymous">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8006989505662520" crossorigin="anonymous"></script>
</head>
<body>
    <div class="age-verification" id="age-verification">
        <div class="age-content">
            <img src="https://files.catbox.moe/kz2lot.png" alt="Logotipo de ExenE" class="age-logo">
            <h1>Verificaci√≥n de Edad</h1>
            <p>Este sitio contiene contenido para mayores de 18 a√±os. ¬øTienes 18 a√±os o m√°s?</p>
            <div class="age-buttons">
                <button id="age-yes">S√≠, entrar</button>
                <button id="age-no">No, salir</button>
            </div>
        </div>
    </div>

    <div class="loader" id="loader">
        <div class="spinner"></div>
    </div>

    <header id="header">
        <div class="top-bar">
            <a href="index.html" class="logo" aria-label="Inicio">
                <img src="https://files.catbox.moe/kz2lot.png" alt="Logotipo de ExenE">
            </a>
            <button id="menu-toggle" class="menu-toggle" aria-label="Abrir men√∫" aria-expanded="false">
                <img src="https://files.catbox.moe/p0ztcg.png" alt="Abrir men√∫" class="menu-icon">
            </button>
            <nav class="menu" id="menu">
                <button id="menu-close" class="menu-close">Cerrar</button>
                <a href="index.html" class="tab-button">Home</a>
                <a href="HomeMusic.html" class="tab-button">M√∫sica</a>
                <a href="yo.html" class="tab-button">Sobre m√≠</a>
                <button id="themes-toggle" class="tab-button themes-button">Temas</button>
                <div id="themes-menu" class="themes-menu" style="display: none;">
                    <button class="theme-option" data-theme="dark">Oscuro</button>
                    <button class="theme-option" data-theme="materialize">Materialize</button>
                    <button class="theme-option" data-theme="bootstrap">Bootstrap</button>
                </div>
            </nav>
            <button id="theme-toggle" class="theme-button">
                <img src="https://cdn-icons-png.flaticon.com/128/6076/6076999.png" alt="Modo oscuro" class="theme-icon">
            </button>
        </div>
    </header>

    <main class="content" id="main-content">
        <section class="categories-section" id="categories-section">
            <div class="categories" id="categories"></div>
        </section>

        <section class="search-section">
            <div class="search-container">
                <div class="search-input-wrapper">
                    <input type="text" id="search" placeholder="Buscar por etiqueta..." aria-label="Buscar im√°genes" list="tag-suggestions">
                    <datalist id="tag-suggestions"></datalist>
                    <button id="clear-search" class="clear-search">‚úï</button>
                </div>
                <button id="search-button" aria-label="Buscar im√°genes">Buscar</button>
            </div>
            <p id="search-results" class="search-results"></p>
            <select id="sort-order" class="sort-order">
                <option value="relevance">Relevancia</option>
                <option value="title">T√≠tulo (A-Z)</option>
            </select>
        </section>

        <section class="tags-section" id="tags-section">
            <button class="reset-button" id="reset-button"><span class="reset-icon">‚úï</span> Restablecer</button>
            <button class="reset-tag" id="reset-tag">‚úï Tag</button>
            <button class="reset-category" id="reset-category">‚úï Categor√≠a</button>
        </section>

        <section class="featured-notes" id="featured-notes">
            <div class="note-banner" id="note-banner"></div>
        </section>

        <section class="for-you" id="for-you">
            <div class="title-container">
                <div class="title-background"></div>
                <h2 class="for-you-title">Para ti</h2>
            </div>
            <div class="for-you-grid" id="for-you-grid"></div>
        </section>

        <section class="top-liked" id="top-liked">
            <div class="title-container">
                <div class="title-background"></div>
                <h2 class="top-liked-title">Lo m√°s gustado</h2>
            </div>
            <div class="top-liked-grid" id="top-liked-grid"></div>
        </section>

        <section class="gallery" id="gallery">
            <p class="filter-indicator" id="filter-indicator"></p>
            <h2 class="gallery-title">Galer√≠a de Im√°genes</h2>
            <div class="image-grid" id="image-grid"></div>
        </section>

        <div class="pagination" id="pagination">
            <p id="filter-count" class="filter-count"></p>
        </div>

        <button id="scroll-top" class="scroll-top-button">‚Üë</button>
    </main>

    <footer>
        <div id="flag-counter"></div>
        <p>¬© 2024 Exen-E. Todos los derechos reservados. | <button id="revoke-age" class="revoke-button">Cambiar verificaci√≥n de edad</button></p>
        <div class="ad-container">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-8006989505662520"
                 data-ad-slot="7151856549"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
    </footer>

    <button id="chat-toggle" class="chat-button">üí¨</button>
    <div id="chat-popup" class="chat-popup">
        <div class="chat-header">
            <span>Chat</span>
            <button id="chat-close" class="chat-close">‚úï</button>
        </div>
        <div class="chat-content"></div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // Tiempo m√°ximo de espera (en milisegundos) para que el contenido se cargue
        const maxWaitTime = 5000; // 5 segundos
        let hasReloaded = localStorage.getItem('hasReloaded') === 'true';

        // Funci√≥n para verificar si el contenido se carg√≥
        function checkContentLoaded() {
            const imageGrid = document.getElementById('image-grid');
            const forYouGrid = document.getElementById('for-you-grid');
            const topLikedGrid = document.getElementById('top-liked-grid');
            const noteBanner = document.getElementById('note-banner');

            // Verifica si al menos uno de los elementos clave tiene contenido
            return (
                (imageGrid && imageGrid.children.length > 0) ||
                (forYouGrid && forYouGrid.children.length > 0) ||
                (topLikedGrid && topLikedGrid.children.length > 0) ||
                (noteBanner && noteBanner.children.length > 0)
            );
        }

        // Si no se ha recargado a√∫n, espera y verifica
        if (!hasReloaded) {
            setTimeout(() => {
                if (!checkContentLoaded()) {
                    console.log('Contenido no cargado, recargando p√°gina...');
                    localStorage.setItem('hasReloaded', 'true'); // Marca que ya se recarg√≥
                    window.location.reload(); // Recarga la p√°gina
                }
            }, maxWaitTime);
        } else {
            // Resetea el flag despu√©s de la recarga para la pr√≥xima visita
            localStorage.setItem('hasReloaded', 'false');
        }
    });
</script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="app.js"></script>
    <script>
        const flagScript = document.createElement('script');
        flagScript.src = 'https://s05.flagcounter.com/mini/N5Ma/bg_FFFFFF/txt_000000/border_CCCCCC/flags_0/';
        flagScript.async = true;
        document.getElementById('flag-counter').appendChild(flagScript);
    </script>
</body>
</html>