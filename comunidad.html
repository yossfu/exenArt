<!DOCTYPE html>
<html lang="es" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>exen-E | Comunidad</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

    <!-- Estilos Personalizados y Mejoras -->
    <style>
        :root { --accent: #e65100; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: #f3f4f6;
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1f2937; }
        ::-webkit-scrollbar-thumb { background: var(--accent); border-radius: 10px; }
        
        .form-input { @apply w-full rounded-lg border-2 border-slate-700 bg-slate-800 px-4 py-2 text-white transition placeholder:text-slate-500 focus:border-orange-500 focus:outline-none focus:ring-1 focus:ring-orange-500/50; }
        .btn { @apply rounded-lg px-5 py-2.5 font-semibold text-white transition duration-300 ease-in-out flex items-center justify-center gap-2; }
        .btn-primary { @apply bg-orange-600 hover:bg-orange-500 disabled:bg-orange-900/50 disabled:text-slate-400 disabled:cursor-not-allowed; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
        
        @keyframes spin { to { transform: rotate(360deg); } }
        .spinner { display: none; animation: spin 1s linear infinite; }
        .btn.loading .spinner { display: inline-block; }
        .btn.loading .btn-text { display: none; }

        #image-modal { display: none; }
        #image-modal.show { display: flex; }

        .tab-active { @apply border-orange-500 text-white; }
        .tab-inactive { @apply border-transparent text-slate-400 hover:text-white; }
    </style>
</head>
<body class="antialiased">

    <header class="sticky top-0 z-[100] flex items-center justify-between bg-slate-900/80 p-4 backdrop-blur-lg shadow-lg">
        <a href="index.html" class="flex items-center text-2xl font-bold">
            <img src="https://files.catbox.moe/ap1lh0.png" alt="exen-E Logo" class="h-12 w-auto">
        </a>
        <div id="user-info-header" class="hidden items-center gap-3">
            <div id="header-profile-link" class="flex items-center gap-3 cursor-pointer">
                <span id="user-name-header" class="font-semibold text-slate-300"></span>
                <img id="user-avatar-header" class="h-10 w-10 rounded-full object-cover bg-slate-700">
            </div>
            <button id="logout-btn" class="btn bg-slate-700 hover:bg-red-600 text-xs"><i class="fas fa-sign-out-alt"></i></button>
        </div>
    </header>
    
    <div id="message-container" class="fixed top-20 right-5 z-[2000]"></div>

    <main class="container mx-auto px-4 py-8">
        <div id="auth-view" class="max-w-md mx-auto fade-in"></div>
        <div id="profile-setup-view" class="hidden max-w-2xl mx-auto fade-in"></div>
        <div id="community-view" class="hidden max-w-4xl mx-auto fade-in"></div>
    </main>

    <div id="image-modal" class="fixed inset-0 z-[2000] bg-black/80 backdrop-blur-md p-4 items-center justify-center fade-in">
        <div class="relative max-w-4xl max-h-[90vh]">
            <img id="modal-image-element" src="" class="h-full w-full object-contain rounded-lg">
            <button id="close-modal-btn" class="absolute -top-3 -right-3 h-10 w-10 rounded-full bg-slate-800 text-white flex items-center justify-center hover:bg-red-600 transition-transform hover:rotate-90 shadow-lg">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>
    </div>

    <script>
        "use strict";
        const firebaseConfig = {
            apiKey: "AIzaSyBB7y-V0P_gKPWH-shvwrmZxHbdq-ASmj8",
            authDomain: "exene-53e6b.firebaseapp.com",
            databaseURL: "https://exene-53e6b-default-rtdb.firebaseio.com",
            projectId: "exene-53e6b",
            storageBucket: "exene-53e6b.appspot.com",
            messagingSenderId: "481369419867",
            appId: "1:481369419867:web:ac5db24c436344262c8f7e"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const auth = firebase.auth();

        // --- GLOBAL STATE & VIEW CONTAINERS ---
        let currentUserData = null;
        let activeCommunityTab = 'wall';
        let currentProfileUserId = null; 

        const views = {
            auth: document.getElementById('auth-view'),
            profileSetup: document.getElementById('profile-setup-view'),
            community: document.getElementById('community-view')
        };
        
        // --- CORE APP LOGIC ---
        auth.onAuthStateChanged(user => {
            if (user) {
                const userRef = db.ref('users/' + user.uid);
                userRef.on('value', snapshot => {
                    if (snapshot.exists()) {
                        currentUserData = { uid: user.uid, ...snapshot.val() };
                        renderAppView('community');
                    } else {
                        renderAppView('profileSetup');
                    }
                });
            } else {
                currentUserData = null;
                renderAppView('auth');
            }
        });

        function renderAppView(viewName, context = {}) {
            Object.values(views).forEach(v => v.style.display = 'none');
            document.getElementById('user-info-header').style.display = 'none';

            views[viewName].style.display = 'block';

            switch (viewName) {
                case 'auth':
                    renderAuthView();
                    break;
                case 'profileSetup':
                    renderProfileSetupView();
                    break;
                case 'community':
                    document.getElementById('user-info-header').style.display = 'flex';
                    updateHeaderUI();
                    renderCommunityView(context);
                    break;
            }
        }
        
        // --- AUTHENTICATION VIEW ---
        function renderAuthView(state = 'login') {
            const isLogin = state === 'login';
            views.auth.innerHTML = `
                <div class="text-center">
                    <div id="login-register-view" class="${state === 'forgot' ? 'hidden' : ''}">
                        <h1 class="text-4xl font-bold mb-4">${isLogin ? 'Iniciar Sesión' : 'Crear Cuenta'}</h1>
                        <p class="text-slate-400 mb-8">Únete a la comunidad para compartir y descubrir.</p>
                        <form id="email-auth-form" class="space-y-4">
                            <input type="email" name="email" class="form-input text-center" placeholder="correo@ejemplo.com" required>
                            <input type="password" name="password" class="form-input text-center" placeholder="Contraseña" required>
                            <div class="${isLogin ? 'hidden' : ''}"><input type="password" name="confirmPassword" class="form-input text-center" placeholder="Confirmar Contraseña"></div>
                            <button type="submit" class="btn btn-primary w-full !mt-6"><span class="btn-text">${isLogin ? 'Iniciar Sesión' : 'Registrarse'}</span><i class="fas fa-spinner spinner"></i></button>
                        </form>
                        <div class="mt-6 text-sm ${isLogin ? '' : 'hidden'}"><button id="forgot-password-btn" class="text-slate-400 hover:text-orange-400 hover:underline">¿Olvidaste tu contraseña?</button></div>
                        <p class="mt-6 text-slate-400">${isLogin ? '¿No tienes una cuenta?' : '¿Ya tienes una cuenta?'} <button id="auth-toggle-btn" class="text-orange-400 hover:underline font-semibold">${isLogin ? 'Regístrate' : 'Inicia Sesión'}</button></p>
                    </div>
                    <div id="forgot-password-view" class="${state === 'forgot' ? '' : 'hidden'}">
                        <h1 class="text-4xl font-bold mb-4">Recuperar Contraseña</h1>
                        <p class="text-slate-400 mb-8">Ingresa tu correo para enviarte un enlace de recuperación.</p>
                        <form id="password-reset-form" class="space-y-4">
                            <input type="email" name="email" class="form-input text-center" placeholder="correo@ejemplo.com" required>
                            <button type="submit" class="btn btn-primary w-full !mt-6"><span class="btn-text">Enviar Correo</span><i class="fas fa-spinner spinner"></i></button>
                        </form>
                        <p class="mt-6"><button id="back-to-login-btn" class="text-orange-400 hover:underline font-semibold">Volver a Inicio de Sesión</button></p>
                    </div>
                </div>`;
            attachAuthListeners();
        }

        function attachAuthListeners() {
            document.getElementById('auth-toggle-btn').addEventListener('click', () => renderAuthView(document.getElementById('confirm-password-container') ? 'login' : 'register'));
            const forgotBtn = document.getElementById('forgot-password-btn');
            if (forgotBtn) forgotBtn.addEventListener('click', () => renderAuthView('forgot'));
            document.getElementById('back-to-login-btn').addEventListener('click', () => renderAuthView('login'));
            
            document.getElementById('email-auth-form').addEventListener('submit', handleAuthFormSubmit);
            document.getElementById('password-reset-form').addEventListener('submit', handlePasswordReset);
        }

        function handleAuthFormSubmit(e) {
            e.preventDefault();
            const form = e.target;
            const button = form.querySelector('button[type="submit"]');
            setButtonLoading(button, true);
            const email = form.email.value;
            const password = form.password.value;
            
            if (form.confirmPassword) { // Register
                if (password !== form.confirmPassword.value) {
                    showMessage('Las contraseñas no coinciden.', 'error');
                    setButtonLoading(button, false);
                    return;
                }
                auth.createUserWithEmailAndPassword(email, password)
                    .catch(err => showMessage(getAuthErrorMessage(err.code), 'error'))
                    .finally(() => setButtonLoading(button, false));
            } else { // Login
                auth.signInWithEmailAndPassword(email, password)
                    .catch(err => showMessage(getAuthErrorMessage(err.code), 'error'))
                    .finally(() => setButtonLoading(button, false));
            }
        }
        
        function handlePasswordReset(e) {
            e.preventDefault();
            const button = e.target.querySelector('button[type="submit"]');
            setButtonLoading(button, true);
            auth.sendPasswordResetEmail(e.target.email.value)
                .then(() => {
                    showMessage('Correo de recuperación enviado. Revisa tu bandeja de entrada.', 'success');
                    renderAuthView('login');
                })
                .catch(err => showMessage(getAuthErrorMessage(err.code), 'error'))
                .finally(() => setButtonLoading(button, false));
        }

        // --- PROFILE SETUP VIEW ---
        function renderProfileSetupView() {
            views.profileSetup.innerHTML = `
                <h2 class="text-3xl font-bold mb-6 text-center">Completa tu Perfil</h2>
                <form id="profile-form" class="space-y-4">
                    <div><label class="block mb-2 text-sm font-medium text-slate-300">Foto de Perfil (URL)</label><input type="url" name="photoURL" class="form-input" placeholder="https://..." required><p class="text-xs text-slate-500 mt-1">Sube tu imagen a <a href="http://catbox.moe" target="_blank" class="underline hover:text-orange-400">catbox.moe</a> y pega el enlace aquí.</p></div>
                    <div><label class="block mb-2 text-sm font-medium text-slate-300">Banner (URL)</label><input type="url" name="bannerURL" class="form-input" placeholder="https://..."></div>
                    <div><label class="block mb-2 text-sm font-medium text-slate-300">Nombre de Usuario</label><input type="text" name="name" class="form-input" maxlength="15" placeholder="Tu nombre..." required></div>
                    <div><label class="block mb-2 text-sm font-medium text-slate-300">Descripción Breve</label><textarea name="description" class="form-input" maxlength="30" rows="2" placeholder="Algo sobre ti..."></textarea></div>
                    <button type="submit" class="btn btn-primary w-full !mt-6"><span class="btn-text">Guardar Perfil</span><i class="fas fa-spinner spinner"></i></button>
                </form>`;
            document.getElementById('profile-form').addEventListener('submit', handleProfileSave);
        }

        function handleProfileSave(e) {
            e.preventDefault();
            const button = e.target.querySelector('button[type="submit"]');
            setButtonLoading(button, true);
            const user = auth.currentUser;
            if (!user) {
                setButtonLoading(button, false);
                return;
            }
            const form = e.target;
            const profileData = {
                name: form.name.value.trim(),
                photoURL: form.photoURL.value.trim(),
                bannerURL: form.bannerURL.value.trim() || null,
                description: form.description.value.trim() || null
            };
            db.ref('users/' + user.uid).set(profileData)
                .then(() => showMessage('¡Perfil guardado con éxito!', 'success'))
                .catch(err => showMessage('Error al guardar el perfil.', 'error'))
                .finally(() => setButtonLoading(button, false));
        }

        // --- COMMUNITY VIEW ---
        function renderCommunityView({ targetUserId = null, tab = 'wall' } = {}) {
            activeCommunityTab = targetUserId ? 'profile' : tab;
            currentProfileUserId = targetUserId || auth.currentUser.uid;
            
            views.community.innerHTML = `
                <div class="flex border-b border-slate-700 mb-6">
                    <button id="wall-tab" class="px-4 py-2 text-lg font-semibold border-b-2 ${activeCommunityTab === 'wall' ? 'tab-active' : 'tab-inactive'}">Comunidad</button>
                    <button id="my-profile-tab" class="px-4 py-2 text-lg font-semibold border-b-2 ${activeCommunityTab === 'my-profile' ? 'tab-active' : 'tab-inactive'}">Mi Perfil</button>
                </div>
                <div id="wall-view" class="${activeCommunityTab === 'wall' ? '' : 'hidden'}">
                    <div class="bg-slate-800/50 p-4 rounded-xl border border-slate-700 mb-8 flex gap-4">
                        <img src="${currentUserData.photoURL}" class="h-12 w-12 rounded-full object-cover bg-slate-700 flex-shrink-0">
                        <form id="post-form" class="w-full">
                            <textarea name="text" class="form-input mb-2 bg-slate-800" rows="3" maxlength="300" placeholder="¿Qué estás pensando, ${currentUserData.name}?"></textarea>
                            <div class="flex items-center justify-between">
                                <input type="url" name="image" class="form-input text-sm py-1 w-2/3" placeholder="URL de la imagen (opcional)">
                                <button type="submit" class="btn btn-primary"><span class="btn-text">Publicar</span><i class="fas fa-spinner spinner"></i></button>
                            </div>
                        </form>
                    </div>
                    <div id="posts-wall" class="space-y-6"></div>
                </div>
                <div id="profile-details-view" class="${activeCommunityTab !== 'wall' ? '' : 'hidden'}"></div>
            `;
            
            if (activeCommunityTab === 'wall') {
                loadPosts();
            } else {
                renderProfileDetails(currentProfileUserId);
            }
            attachCommunityListeners();
        }

        function attachCommunityListeners() {
            document.getElementById('wall-tab').addEventListener('click', () => renderCommunityView({ tab: 'wall' }));
            document.getElementById('my-profile-tab').addEventListener('click', () => renderCommunityView({ tab: 'my-profile' }));
            document.getElementById('post-form').addEventListener('submit', handlePostSubmit);
        }

        async function renderProfileDetails(userId) {
            const container = document.getElementById('profile-details-view');
            container.innerHTML = `<div class="text-center py-8"><i class="fas fa-spinner fa-spin fa-2x"></i></div>`;
            
            const userSnap = await db.ref(`users/${userId}`).once('value');
            if (!userSnap.exists()) {
                container.innerHTML = `<p class="text-center text-red-400">Error: Usuario no encontrado.</p>`;
                return;
            }
            const userData = userSnap.val();

            container.innerHTML = `
                <div class="fade-in">
                    <div class="relative h-48 md:h-64 rounded-xl overflow-hidden bg-slate-800">
                        <img src="${userData.bannerURL || `https://placehold.co/1200x400/0f172a/1e2937?text=+`}" class="w-full h-full object-cover">
                        <div class="absolute inset-0 bg-gradient-to-t from-slate-900/80 to-transparent"></div>
                    </div>
                    <div class="relative px-4">
                        <div class="flex items-end gap-4 -mt-16">
                            <img src="${userData.photoURL}" class="w-32 h-32 rounded-full border-4 border-slate-800 object-cover bg-slate-700 cursor-pointer" onclick="openImageModal(this.src)">
                            <div>
                                <h2 class="text-2xl md:text-4xl font-bold">${userData.name}</h2>
                                <p class="text-slate-400 mt-1">${userData.description || ''}</p>
                            </div>
                        </div>
                    </div>
                    <div class="mt-8">
                        <h3 class="text-xl font-bold mb-4 border-b border-slate-700 pb-2">Publicaciones</h3>
                        <div id="user-posts-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"></div>
                    </div>
                </div>`;
            loadUserPosts(userId);
        }
        
        // --- DATA HANDLING (Posts, Reactions, etc.) ---
        function handlePostSubmit(e) {
            e.preventDefault();
            const form = e.target;
            const button = form.querySelector('button[type="submit"]');
            setButtonLoading(button, true);
            const postData = {
                authorUid: auth.currentUser.uid,
                text: form.text.value.trim(),
                imageUrl: form.image.value.trim() || null,
                timestamp: firebase.database.ServerValue.TIMESTAMP
            };
            if (!postData.text && !postData.imageUrl) {
                showMessage('La publicación debe tener texto o una imagen.', 'error');
                setButtonLoading(button, false);
                return;
            }
            db.ref('posts').push(postData)
                .then(() => form.reset())
                .catch(() => showMessage('No se pudo crear la publicación.', 'error'))
                .finally(() => setButtonLoading(button, false));
        }

        function loadPosts() {
            db.ref('posts').orderByChild('timestamp').on('value', async snapshot => {
                const wall = document.getElementById('posts-wall');
                if (!wall) return;
                wall.innerHTML = '';
                if (!snapshot.exists()) {
                    wall.innerHTML = `<p class="text-center text-slate-500">Aún no hay publicaciones. ¡Sé el primero!</p>`;
                    return;
                }
                const posts = [];
                snapshot.forEach(child => posts.push({ id: child.key, ...child.val() }));
                posts.reverse();
                
                const userPromises = posts.map(p => db.ref(`users/${p.authorUid}`).once('value'));
                const userSnaps = await Promise.all(userPromises);
                const usersData = userSnaps.map(snap => snap.val());
                
                posts.forEach((post, i) => wall.appendChild(createPostElement(post, usersData[i])));
            });
        }
        
        function loadUserPosts(userId) {
            db.ref('posts').orderByChild('authorUid').equalTo(userId).on('value', snapshot => {
                const grid = document.getElementById('user-posts-grid');
                if (!grid) return;
                grid.innerHTML = '';
                if (!snapshot.exists()) {
                    grid.innerHTML = `<p class="col-span-full text-center text-slate-500">Este usuario aún no ha publicado ninguna imagen.</p>`;
                    return;
                }
                const posts = [];
                snapshot.forEach(child => {
                    const post = child.val();
                    if(post.imageUrl) posts.push(post);
                });
                posts.reverse().forEach(post => {
                    const postDiv = document.createElement('div');
                    postDiv.className = 'aspect-square bg-slate-800 rounded-lg overflow-hidden cursor-pointer group';
                    postDiv.innerHTML = `<img src="${post.imageUrl}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">`;
                    postDiv.addEventListener('click', () => openImageModal(post.imageUrl));
                    grid.appendChild(postDiv);
                });
            });
        }
        
        function createPostElement(post, author) {
            const div = document.createElement('div');
            div.className = 'post-card bg-slate-800/50 p-5 rounded-xl border border-slate-700 fade-in';
            
            let postTextHTML = post.text;
            if (post.text && post.text.length > 300) {
                postTextHTML = `<span>${post.text.substring(0, 300)}... </span><button class="text-orange-400 hover:underline text-sm">Ver más</button>`;
            }

            div.innerHTML = `
                <div class="flex items-center mb-4">
                    <img src="${author.photoURL}" class="h-12 w-12 rounded-full object-cover mr-4 cursor-pointer" onclick="renderAppView('community', { targetUserId: '${post.authorUid}', tab: 'profile' })">
                    <div>
                        <p class="font-bold text-orange-400 cursor-pointer" onclick="renderAppView('community', { targetUserId: '${post.authorUid}', tab: 'profile' })">${author.name}</p>
                        <p class="text-xs text-slate-500">${formatTimeAgo(post.timestamp)}</p>
                    </div>
                </div>
                <div class="post-content mb-4 space-y-4">
                    ${post.text ? `<p class="text-slate-300 whitespace-pre-wrap">${postTextHTML}</p>` : ''}
                    ${post.imageUrl ? `<img src="${post.imageUrl}" class="w-full rounded-lg max-h-96 object-contain bg-slate-900 cursor-pointer" onclick="openImageModal('${post.imageUrl}')">` : ''}
                </div>
                <div class="flex items-center gap-4 text-slate-400">
                    <button class="reaction-btn flex items-center gap-2 hover:text-red-500 transition"><i class="far fa-heart"></i><span class="reaction-count">0</span></button>
                </div>`;
            
            const seeMoreBtn = div.querySelector('button.text-sm');
            if (seeMoreBtn) {
                seeMoreBtn.addEventListener('click', (e) => {
                    e.target.parentElement.innerHTML = post.text.replace(/\n/g, '<br>');
                });
            }

            const reactionBtn = div.querySelector('.reaction-btn');
            reactionBtn.addEventListener('click', () => toggleReaction(post.id, auth.currentUser.uid));
            
            db.ref(`reactions/${post.id}`).on('value', snapshot => {
                const reactions = snapshot.val() || {};
                reactionBtn.querySelector('.reaction-count').textContent = snapshot.numChildren();
                reactionBtn.querySelector('i').className = reactions[currentUserData?.uid] ? 'fas fa-heart text-red-500' : 'far fa-heart';
            });
            return div;
        }

        function toggleReaction(postId, uid) {
            if (!uid) { showMessage('Debes iniciar sesión para reaccionar.', 'error'); return; }
            const reactionRef = db.ref(`reactions/${postId}/${uid}`);
            reactionRef.transaction(currentData => (currentData ? null : true));
        }

        // --- UI UTILITY FUNCTIONS ---
        function updateHeaderUI() {
            document.getElementById('user-name-header').textContent = currentUserData.name;
            document.getElementById('user-avatar-header').src = currentUserData.photoURL;
            document.getElementById('header-profile-link').onclick = () => renderCommunityView({ tab: 'my-profile' });
            document.getElementById('logout-btn').onclick = () => auth.signOut();
        }

        function openImageModal(imageUrl) {
            document.getElementById('modal-image-element').src = imageUrl;
            document.getElementById('image-modal').classList.add('show');
            document.getElementById('close-modal-btn').onclick = closeImageModal;
        }

        function closeImageModal() { document.getElementById('image-modal').classList.remove('show'); }
        
        function setButtonLoading(button, isLoading) {
            button.disabled = isLoading;
            button.classList.toggle('loading', isLoading);
        }

        function showMessage(text, type = 'info', duration = 3000) {
            const id = `msg-${Date.now()}`;
            const colors = { success: 'bg-green-500', error: 'bg-red-500', info: 'bg-blue-500' };
            const msgDiv = document.createElement('div');
            msgDiv.id = id;
            msgDiv.className = `w-full max-w-sm p-4 rounded-lg text-white shadow-lg mb-2 fade-in ${colors[type]}`;
            msgDiv.textContent = text;
            document.getElementById('message-container').appendChild(msgDiv);
            setTimeout(() => document.getElementById(id)?.remove(), duration);
        }

        function formatTimeAgo(timestamp) {
            const seconds = Math.floor((Date.now() - timestamp) / 1000);
            if (seconds < 60) return `hace un momento`;
            const minutes = Math.floor(seconds / 60);
            if (minutes < 60) return `hace ${minutes} min`;
            const hours = Math.floor(minutes / 60);
            if (hours < 24) return `hace ${hours} h`;
            const days = Math.floor(hours / 24);
            return `hace ${days} días`;
        }
        
        function getAuthErrorMessage(code) {
            switch (code) {
                case 'auth/user-not-found': return 'No se encontró cuenta con este correo.';
                case 'auth/wrong-password': return 'Contraseña incorrecta.';
                case 'auth/email-already-in-use': return 'Este correo ya está en uso.';
                case 'auth/weak-password': return 'La contraseña debe tener al menos 6 caracteres.';
                case 'auth/invalid-email': return 'El formato del correo no es válido.';
                default: return 'Ocurrió un error. Por favor, inténtalo de nuevo.';
            }
        }
    </script>
</body>
</html>

